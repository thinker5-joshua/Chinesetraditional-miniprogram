# 处理data-optimized.js文件重复条目方案

## 问题分析

当前data-optimized.js文件存在23个重复条目，每个重复条目都有相同的字(char)和正确读音(correctPronunciation)组合，但可能在wrongPronunciations和relatedPhrases字段中有不同的内容。

## 处理方案

### 1. 读取和解析文件

* 读取data-optimized.js文件内容

* 提取JavaScript数组部分

* 解析为JSON对象列表

### 2. 合并重复条目

* 使用字典按(char, correctPronunciation)组合分组

* 对于每组条目：

  * 保留第一个条目作为基础

  * 从其他重复条目中提取新的wrongPronunciations和relatedPhrases

  * 将新内容添加到基础条目中，确保不重复

  * 保留基础条目的其他字段（explanation、errorReasonType、difficultyLevel）

### 3. 删除重复条目

* 只保留每组中的合并后条目

* 构建新的无重复条目列表

### 4. 重新生成ID

* 按顺序为新列表中的条目重新分配ID，从1开始递增

* 确保每个条目都有唯一的连续ID

### 5. 保存处理后的文件

* 生成新的JavaScript数组内容

* 保留原文件的头部注释和结构

* 保存为新文件或覆盖原文件

### 6. 验证处理结果

* 检查处理后的文件是否无重复条目

* 验证ID是否连续且唯一

* 确认合并后的字段内容完整

* 验证文件格式是否正确

## 技术实现

使用Python脚本实现上述功能，主要步骤：

1. 读取并解析文件
2. 分组并合并重复条目
3. 构建新的无重复列表
4. 重新分配ID
5. 生成并保存新文件
6. 验证处理结果

## 预期结果

* 处理后的文件无重复的(char, correctPronunciation)组合

* 所有条目的wrongPronunciations和relatedPhrases字段包含所有相关内容

* ID从1开始连续递增

* 文件格式正确，可直接用于小程序

