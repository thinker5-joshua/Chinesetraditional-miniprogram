### 重新生成诗词数据计划

#### 1. 准备工作
- **备份当前数据**：备份当前的caves_data.js和poems_data.js文件
- **清理现有诗词**：删除poems_data.js中的所有诗词，只保留空的poems数组
- **检查脚本工具**：确保现有脚本正常工作，根据需要修改
- **完善别名映射**：确保每个地点都有完整的别名和古地名映射

#### 2. 数据重置
- **清空诗词数据**：将poems_data.js中的poems数组设置为空数组
- **重置诗词ID**：确保新生成的诗词ID从1开始
- **初始化统计数据**：为每个地点创建诗词统计记录

#### 3. 分批次处理
- **批次划分**：将72个地点分为4个批次，每批次18个地点
- **第一批次**：ID 1-18
- **第二批次**：ID 19-36
- **第三批次**：ID 37-54
- **第四批次**：ID 55-72

#### 4. 批量生成诗词
- **查找相关诗词**：使用find_location_poems.js为每个地点查找相关诗词
- **验证诗词有效性**：使用comprehensive_validate.js验证诗词真实性和相关性
- **筛选优质诗词**：为每个地点选择3-5首高质量诗词
- **批量添加诗词**：使用batch_add_poems.js脚本添加诗词

#### 5. 验证与清理
- **全面验证**：运行comprehensive_validate.js验证所有诗词
- **检查数量**：确保每个地点有3-5首诗词
- **清理无效数据**：删除不符合要求的诗词
- **重新生成ID**：确保诗词ID连续递增

#### 6. 最终确认与保存
- **确认数据完整性**：检查所有字段完整，格式正确
- **保存最终数据**：将整理好的数据保存到poems_data.js
- **创建备份**：创建数据备份，防止意外丢失

### 执行顺序
1. 准备工作（1天）
2. 数据重置（1天）
3. 第一批次处理（18个地点，2天）
4. 第二批次处理（18个地点，2天）
5. 第三批次处理（18个地点，2天）
6. 第四批次处理（18个地点，2天）
7. 验证与清理（1天）
8. 最终确认与保存（1天）

### 技术要点
- **完全重置**：确保现有诗词数据被彻底删除
- **批量处理**：使用批次处理提高效率
- **严格验证**：确保所有诗词真实有效
- **数据一致性**：确保所有诗词格式统一，ID连续
- **备份机制**：定期备份数据，防止意外丢失

### 预期结果
- 更新后的poems_data.js包含72个地点的诗词
- 每个地点有3-5首高质量诗词
- 所有诗词均来自chinese-poetry数据库，真实有效
- 诗词ID连续，格式统一
- 生成完整的验证报告

### 风险控制
- 遇到数据问题及时调整
- 定期备份数据，防止意外丢失
- 严格按照计划执行，确保进度
- 遇到问题及时沟通解决