# 修复诗词排版和下一首功能问题

## 问题分析

1. **诗词挑战中七言诗显示问题**：
   - 一行容纳不下两句七言诗
   - 需要调小字体
   - 多层框的内外边距过大，占据过多显示位置

2. **洞天详情中诗词排版问题**：
   - 没有按照新的排版显示
   - 仍然一句一句断行，没有按照分行符显示
   - 调用方法不正确

3. **下一首功能问题**：
   - 点击下一首后诗词名变化，但内容没变
   - 数据更新不正确

## 解决方案

### 1. 优化诗词挑战中的字体和边距

- 调小诗词内容字体大小
- 缩减各层框的内外边距
- 减少不必要的嵌套框

### 2. 修复洞天详情中的诗词排版

- 确保洞天详情中正确调用splitPoemContent方法
- 检查洞天详情的WXML，确保使用分行符显示诗词内容
- 确保nextPoem方法正确更新诗词内容

### 3. 修复下一首功能

- 检查nextPoem方法的实现
- 确保nextPoem方法正确更新诗词内容
- 确保splitPoemContent方法在诗词切换时被调用

## 实现步骤

### 1. 优化诗词挑战的CSS样式

```css
/* 调小诗词内容字体大小 */
.poem-line {
  font-size: 36rpx;
  /* 其他样式保持不变 */
}

/* 缩减各层框的内外边距 */
.poem-content-container {
  padding: 20rpx;
  /* 其他样式保持不变 */
}

.challenge-container {
  padding: 20rpx;
  /* 其他样式保持不变 */
}
```

### 2. 修复洞天详情的诗词显示

检查洞天详情的WXML，确保使用分行符显示诗词内容：

```wxml
<!-- 诗词正文 - 传统分行排版 -->
<view class="poem-content-traditional">
  <block wx:for="{{poemLines}}" wx:key="index">
    <text class="poem-line">{{item}}</text>
  </block>
</view>
```

### 3. 修复nextPoem方法

确保nextPoem方法正确更新诗词内容，并调用splitPoemContent方法：

```javascript
nextPoem() {
  // 现有逻辑...
  
  // 更新数据
  this.setData({
    currentCavePoem: nextPoem,
    poemLines: nextPoem.content.split('\n').filter(line => line.trim() !== '')
  });
}
```

## 预期效果

1. 诗词挑战中七言诗两句一行能够正常显示
2. 洞天详情中诗词按照分行符正确显示
3. 点击下一首后诗词名和内容都正确更新
4. 整体显示更加紧凑，减少不必要的边距
5. 诗词排版风格统一，典雅大方
