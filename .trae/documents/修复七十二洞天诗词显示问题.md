# ä¿®å¤ä¸ƒåäºŒæ´å¤©è¯—è¯æ˜¾ç¤ºé—®é¢˜

## é—®é¢˜åˆ†æ

1. **è¯—å†…å®¹è‡ªåŠ¨æŠ˜è¡Œé—®é¢˜**ï¼š
   - å½“å‰CSSä¸­ï¼Œ`.poem-line`ç±»è®¾ç½®äº†`white-space: nowrap`å’Œ`text-overflow: ellipsis`ï¼Œå¯¼è‡´æ–‡æœ¬ä¸æ¢è¡Œï¼Œè¶…å‡ºæ—¶æ˜¾ç¤ºçœç•¥å·
   - éœ€è¦ä¿®æ”¹ä¸ºå…è®¸è‡ªåŠ¨æŠ˜è¡Œï¼Œå®Œå…¨æ˜¾ç¤ºæ‰€æœ‰å†…å®¹

2. **è¯—è¯æŒ‘æˆ˜ä¸­éšè—ä¸€ä¸ªå­—çš„æ•ˆæœ**ï¼š
   - å½“å‰ä»£ç ä¸­ï¼Œ`processPoemContent`å‡½æ•°ä¼šéšæœºé€‰æ‹©ä¸€ä¸ªå­—ï¼Œç„¶åç”¨`ğŸŒŸ`æ›¿æ¢æ˜¾ç¤º
   - ä½†ä»WXMLç»“æ„çœ‹ï¼Œè¯—è¯æŒ‘æˆ˜ä¸­ä½¿ç”¨çš„æ˜¯`currentPoemLines`æ•°ç»„ï¼Œè€Œä¸æ˜¯`poemDisplayContent`
   - éœ€è¦ä¿®æ”¹ä»£ç ï¼Œç¡®ä¿éšè—å­—æ•ˆæœèƒ½æ­£ç¡®åº”ç”¨åˆ°`currentPoemLines`ä¸­

3. **è°ƒæ•´å­—ä½“å¤§å°å’Œè¡Œé—´è·**ï¼š
   - å½“å‰`.poem-line`å­—ä½“å¤§å°æ˜¯32rpxï¼Œè¡Œé«˜1.5
   - éœ€è¦é€‚å½“å¢å¤§å­—ä½“å¤§å°ï¼Œä½†è¦ç¡®ä¿ä¸¤å¥ä¸ƒè¨€è¯—èƒ½åœ¨ä¸€è¡Œæ˜¾ç¤º
   - ç”¨æˆ·å¸Œæœ›è¡Œé—´è·å¯ä»¥åŠ å¤§ï¼Œéœ€è¦è°ƒæ•´è¡Œé«˜å’Œmargin

## å®ç°æ­¥éª¤

### 1. ä¿®å¤è¯—å†…å®¹è‡ªåŠ¨æŠ˜è¡Œé—®é¢˜
   - ä¿®æ”¹`.poem-line`ç±»çš„CSSæ ·å¼ï¼Œå»æ‰`white-space: nowrap`å’Œ`text-overflow: ellipsis`
   - æ·»åŠ `white-space: normal`å’Œ`word-wrap: break-word`ç¡®ä¿é•¿æ–‡æœ¬èƒ½æ­£ç¡®æ¢è¡Œ
   - è°ƒæ•´`max-width`å±æ€§ï¼Œç¡®ä¿æ–‡æœ¬åœ¨å®¹å™¨å†…æ­£ç¡®æ˜¾ç¤º

### 2. å®ç°è¯—è¯æŒ‘æˆ˜ä¸­éšè—ä¸€ä¸ªå­—çš„æ•ˆæœ
   - ä¿®æ”¹`splitPoemContent`å‡½æ•°ï¼Œç¡®ä¿å¤„ç†éšè—å­—æ•ˆæœ
   - æˆ–è€…ä¿®æ”¹`processPoemContent`å‡½æ•°ï¼Œå°†éšè—å­—æ•ˆæœåº”ç”¨åˆ°`currentPoemLines`
   - ä½¿ç”¨æ›´å¥½çœ‹çš„éšè—å­—æ ·å¼ï¼Œå¦‚æ¸å˜èƒŒæ™¯çš„ç©ºç™½æ¡†

### 3. è°ƒæ•´å­—ä½“å¤§å°å’Œè¡Œé—´è·
   - å°†`.poem-line`å­—ä½“å¤§å°ä»32rpxè°ƒæ•´åˆ°36rpx
   - å¢å¤§è¡Œé«˜ä»1.5åˆ°2.0ï¼ŒåŠ å¤§è¡Œé—´è·
   - å¢å¤§`margin`å€¼ï¼Œè¿›ä¸€æ­¥å¢åŠ è¡Œä¸è¡Œä¹‹é—´çš„è·ç¦»
   - ç¡®ä¿ä¸¤å¥ä¸ƒè¨€è¯—ï¼ˆ14ä¸ªå­—ï¼‰èƒ½åœ¨ä¸€è¡Œæ˜¾ç¤º

## ä»£ç å®ç°

### 1. CSSä¿®æ”¹
```css
.poem-line {
  font-size: 36rpx; /* å¢å¤§å­—ä½“å¤§å° */
  line-height: 2.0; /* å¢å¤§è¡Œé«˜ */
  color: #e6e6e6;
  text-align: center;
  margin: 8rpx 0; /* å¢å¤§è¡Œé—´è· */
  font-family: 'KaiTi', 'æ¥·ä½“', serif;
  letter-spacing: 0.5rpx;
  max-width: 100%;
  overflow: visible; /* å…è®¸å†…å®¹æº¢å‡ºå¯è§ */
  white-space: normal; /* å…è®¸è‡ªåŠ¨æ¢è¡Œ */
  word-wrap: break-word; /* å…è®¸é•¿å•è¯æ¢è¡Œ */
}
```

### 2. JavaScriptä¿®æ”¹
ä¿®æ”¹`processPoemContent`å‡½æ•°ï¼Œå°†éšè—å­—æ•ˆæœåº”ç”¨åˆ°`currentPoemLines`ï¼š

```javascript
processPoemContent() {
  const currentPoem = this.data.gameData.currentPoem;
  if (!currentPoem || !currentPoem.content) {
    console.error('è¯—è¯æ•°æ®æ— æ•ˆ');
    return;
  }
  
  const content = currentPoem.content;
  
  // éšæœºé€‰æ‹©è¦éšè—çš„å­—
  const chars = content.split('');
  const nonPunctuationChars = chars.filter(char => /[\u4e00-\u9fa5]/.test(char));
  
  if (nonPunctuationChars.length === 0) {
    console.error('æ²¡æœ‰å¯éšè—çš„æ±‰å­—');
    return;
  }
  
  const targetCharIndex = Math.floor(Math.random() * nonPunctuationChars.length);
  const targetChar = nonPunctuationChars[targetCharIndex];
  
  // æ‰¾åˆ°ç›®æ ‡å­—åœ¨åŸæ–‡ä¸­çš„ä½ç½®
  let actualIndex = -1;
  let charCount = 0;
  for (let i = 0; i < chars.length; i++) {
    if (/[\u4e00-\u9fa5]/.test(chars[i])) {
      if (charCount === targetCharIndex) {
        actualIndex = i;
        break;
      }
      charCount++;
    }
  }
  
  // ç”Ÿæˆç­”æ¡ˆé€‰é¡¹
  const answerOptions = this.generateRelatedOptions(targetChar);
  
  // æ„å»ºæ˜¾ç¤ºå†…å®¹ï¼Œéšè—çš„å­—ç”¨ç‰¹æ®Šæ ·å¼
  const hiddenCharHTML = '<span class="hidden-char"></span>';
  const displayContent = chars.map((char, index) => {
    if (index === actualIndex) {
      return hiddenCharHTML;
    }
    return char;
  }).join('');
  
  // å¤„ç†åˆ†è¡Œ
  const poemLines = displayContent.split('\n').filter(line => line.trim() !== '');
  
  // æ›´æ–°é¡µé¢æ•°æ®
  this.setData({
    currentPoemLines: poemLines,
    answerOptions: answerOptions,
    targetChar: targetChar
  });
}
```

### 3. ä¼˜åŒ–éšè—å­—æ ·å¼
```css
.hidden-char {
  display: inline-block;
  background: linear-gradient(135deg, #ffd700, #ff6b6b);
  color: white;
  width: 40rpx;
  height: 40rpx;
  line-height: 40rpx;
  border-radius: 8rpx;
  font-weight: bold;
  font-size: 32rpx;
  margin: 0 4rpx;
  text-align: center;
  animation: pulse 2s ease-in-out infinite;
  box-shadow: 0 0 15rpx rgba(255, 215, 0, 0.5);
}
```

## æµ‹è¯•æ–¹æ¡ˆ
1. éªŒè¯è¯—å†…å®¹æ˜¯å¦èƒ½è‡ªåŠ¨æŠ˜è¡Œï¼Œä¸å†æ˜¾ç¤ºçœç•¥å·
2. éªŒè¯è¯—è¯æŒ‘æˆ˜ä¸­æ˜¯å¦æ­£ç¡®æ˜¾ç¤ºéšè—å­—ï¼Œæ ·å¼ç¾è§‚
3. éªŒè¯ä¸¤å¥ä¸ƒè¨€è¯—èƒ½åœ¨ä¸€è¡Œæ˜¾ç¤ºï¼Œå­—ä½“å¤§å°åˆé€‚
4. éªŒè¯è¡Œé—´è·æ˜æ˜¾å¢å¤§ï¼Œæé«˜äº†å¯è¯»æ€§
5. éªŒè¯éšè—å­—æ•ˆæœæ¸…æ™°å¥½çœ‹