## 部署云函数并上传数据到云数据库

### 问题分析
1. 云函数 `import_to_cloud` 期望数据包含 `id` 字段，但新数据文件使用 `charId` 字段
2. 云函数默认读取 `export_data.json` 文件
3. 需要将数据文件复制到云函数目录并部署函数

### 解决方案
1. **准备数据文件**：将新数据中的 `charId` 字段映射为 `id` 字段
2. **复制数据文件**：将处理后的数据文件复制到云函数目录并命名为 `export_data.json`
3. **部署云函数**：使用 `wx-server-sdk` 或相关工具部署云函数
4. **调用云函数**：先检查云数据库当前数据量，再调用导入功能
5. **验证结果**：再次检查云数据库数据量，确保数据已成功导入

### 具体步骤
1. **修改数据处理脚本**：更新 `import_new_data.js` 脚本，确保输出文件使用 `id` 而不是 `charId`
2. **生成最终数据文件**：运行脚本生成包含 `id` 字段的数据文件
3. **复制到云函数目录**：将生成的 `export_data.json` 复制到 `cloudfunctions/import_to_cloud/` 目录
4. **安装依赖**：在云函数目录中安装必要的依赖
5. **部署云函数**：使用命令行工具部署云函数
6. **调用检查功能**：执行云函数的 `check` 操作，获取当前数据量
7. **调用导入功能**：执行云函数的导入操作，将新数据导入到云数据库
8. **验证导入结果**：再次调用检查功能，确认数据量已增加 91 条

### 预期结果
- 云数据库中的数据量将增加 91 条
- 所有新数据都将成功导入，没有重复记录
- 导入过程中不会出现错误

### 风险控制
- 在部署前备份云函数目录中的现有 `export_data.json` 文件
- 使用事务处理确保数据一致性
- 分批导入数据，避免触发频率限制
- 详细记录导入过程中的日志，便于排查问题