# 守护神兽页面优化计划（修订版）

## 1. 图片显示优化

### 1.1 统一图片显示为圆圈形式
- 将所有神兽图片显示改为圆圈形式
- 优化图片容器样式，统一使用圆形边框
- 确保图片居中显示

### 1.2 不同场景的图片规格设计
- **列表场景**：小尺寸图片（120rpx × 120rpx）
- **单个卡片/详情页**：中等尺寸图片（200rpx × 200rpx）
- **海报生成**：大尺寸图片（400rpx × 400rpx）
- **首页展示**：中等尺寸图片（200rpx × 200rpx）

### 1.3 图片缓存与预加载方案
- 实现图片预加载机制，提升页面加载速度
- 针对不同场景加载对应尺寸的图片
- 使用微信小程序的缓存API缓存图片
- 优化图片加载逻辑，避免重复请求

## 2. 首页布局优化

### 2.1 合并抽取按钮与守护神兽卡
- 将抽取按钮区域与守护神兽卡合并为"待抽取守护神兽展示区"
- 实现已抽取/待抽取展示区的二选一显示逻辑
- 根据本地存储的抽取状态动态切换显示

### 2.2 待抽取展示区样式优化
- 仅显示神兽卡背面图
- 圆形显示（中等尺寸：200rpx × 200rpx）
- 带神秘微光闪烁效果

### 2.3 已抽取展示区样式优化
- 增大神兽图形（中等尺寸：200rpx × 200rpx），居中显示
- 四周添加升腾火焰效果
- 仅显示name和beastName，右侧平行显示
- 使用不同颜色区分name和beastName
- 移除拼音和rank显示

## 3. 抽取仪式页优化

### 3.1 移除背景图
- 移除抽取仪式页的背景图
- 在引导文案后添加神兽卡背面图
- 圆形显示（中等尺寸：200rpx × 200rpx）
- 带神秘微光闪烁效果
- 保持与首页一致的样式

### 3.2 优化引导文案
- 第一行"请闭眼凝神3秒，默念心中至诚之问——"后增加行距
- 后续文字合并为一段话，取消强制分行
- 使用不同字体显示

## 4. 海报生成修复

### 4.1 修复图像超出边框问题
- 调整海报生成逻辑
- 使用大尺寸图片（400rpx × 400rpx）
- 确保生成的图像不超出边框
- 优化图像缩放和裁剪逻辑

## 5. 脊兽列表区优化

### 5.1 移除description-text
- 从脊兽列表项中移除description-text显示
- 使用小尺寸图片（120rpx × 120rpx）
- 优化列表项布局，提升视觉效果

## 6. 实现步骤

### 步骤1：图片显示统一与规格设计
- 修改所有图片容器样式为圆形
- 定义不同场景的图片尺寸
- 实现图片尺寸的切换逻辑

### 步骤2：图片缓存与预加载实现
- 实现图片预加载机制
- 针对不同场景加载对应尺寸的图片
- 添加图片缓存逻辑

### 步骤3：首页布局优化
- 合并抽取按钮与守护神兽卡
- 实现二选一显示逻辑
- 优化已抽取/待抽取展示区样式

### 步骤4：抽取仪式页优化
- 移除背景图
- 添加神兽卡背面图
- 优化引导文案样式

### 步骤5：海报生成修复
- 修复图像超出边框问题
- 使用大尺寸图片

### 步骤6：脊兽列表区优化
- 移除description-text
- 使用小尺寸图片
- 优化列表项布局

## 7. 技术实现细节

### 7.1 图片规格实现
- 在imageConfig.js中定义不同场景的图片尺寸
- 根据场景动态调整图片大小
- 确保图片显示比例一致

### 7.2 圆形图片实现
- 使用border-radius: 50%实现圆形显示
- 调整图片容器大小和内边距
- 确保图片居中显示

### 7.3 图片预加载实现
- 在页面加载时预加载所有所需图片
- 使用wx.getImageInfo API获取图片信息
- 根据场景缓存对应尺寸的图片

### 7.4 动画效果实现
- 使用CSS @keyframes实现微光闪烁和火焰效果
- 优化动画性能，避免卡顿

### 7.5 二选一显示逻辑
- 使用wx:if/wx:else条件渲染
- 根据本地存储的抽取状态判断显示内容
- 实现平滑的切换效果

## 8. 文件修改清单

### 修改文件
- `subgames/guardian-beast/imageConfig.js` - 优化图片配置，添加尺寸定义
- `subgames/guardian-beast/index.wxml` - 首页布局优化
- `subgames/guardian-beast/index.wxss` - 首页样式优化，添加不同尺寸图片样式
- `subgames/guardian-beast/index.js` - 首页逻辑优化
- `subgames/guardian-beast/draw.wxml` - 抽取仪式页优化
- `subgames/guardian-beast/draw.wxss` - 抽取仪式页样式优化
- `subgames/guardian-beast/poster.js` - 海报生成修复，使用大尺寸图片
- `subgames/guardian-beast/knowledge/list.wxml` - 脊兽列表优化，使用小尺寸图片
- `subgames/guardian-beast/knowledge/list.wxss` - 脊兽列表样式优化，添加小尺寸图片样式

## 9. 预期效果

- 统一的圆形图片显示效果
- 不同场景下使用合适尺寸的图片
- 优化的页面加载速度，通过图片预加载和缓存
- 清晰的二选一显示逻辑，已抽取/待抽取状态分明
- 美观的动画效果，增强用户体验
- 修复的海报生成功能，图像不再超出边框
- 优化的脊兽列表，信息更简洁，图形大小适中

## 10. 风险评估

- 低风险：主要是样式和布局优化，不影响核心功能
- 可回滚：如遇问题可恢复原有样式和逻辑
- 提升用户体验：优化后的页面更美观，交互更流畅
- 便于维护：统一的样式和逻辑，减少重复代码
- 优化性能：根据场景加载合适尺寸的图片，提升加载速度