## 问题分析

### 核心问题
1. **tab切换时图形绘制不稳定**：有时画，有时不画
2. **滚动时重新绘制正常**：知识区滚动时触发重新绘制正常
3. **调试器警告**：
   - `reportRealtimeAction:fail not support` - Worker相关警告
   - `21 listeners of event onBeforeUnloadPage_196 have been added, possibly causing memory leak` - 内存泄漏警告

### 根本原因
- **频繁绘制导致性能问题**：移除onScroll防抖后，滚动时频繁调用drawCurrentTabCanvas，可能导致性能问题
- **事件监听器内存泄漏**：频繁的绘制调用可能导致事件监听器累积
- **DOM更新与绘制时机不匹配**：300ms延迟可能仍然不足以确保DOM完全更新
- **绘制方法可靠性问题**：绘制方法可能在某些情况下失败

## 修复方案

### 1. 优化滚动重绘逻辑

**恢复防抖处理**：
- 重新添加onScroll的防抖处理，避免频繁绘制
- 调整防抖时间，平衡性能和绘制及时性
- 减少不必要的绘制调用，避免内存泄漏

### 2. 增强绘制可靠性

**添加绘制重试机制**：
- 在drawCurrentTabCanvas方法中添加重试逻辑
- 确保绘制方法在DOM完全就绪后执行
- 提高绘制成功率

### 3. 优化绘制时机

**调整延迟时间**：
- 可能需要调整onTabChange中的延迟时间
- 确保绘制方法在DOM完全更新后执行
- 避免在DOM未就绪时调用绘制方法

### 4. 减少绘制频率

**避免不必要的绘制**：
- 确保只有在实际需要时才调用绘制方法
- 避免重复绘制
- 优化绘制逻辑，减少性能消耗

## 修复步骤

1. **恢复onScroll的防抖处理**：添加合适的防抖时间
2. **增强drawCurrentTabCanvas方法**：添加重试机制
3. **优化绘制时机**：调整延迟时间
4. **测试修复效果**：验证tab切换时图形能稳定绘制

## 预期效果

- ✅ tab切换时图形能稳定绘制，不再出现有时画有时不画的情况
- ✅ 减少内存泄漏风险，避免事件监听器累积
- ✅ 优化性能，避免频繁绘制导致的性能问题
- ✅ 确保滚动时图形能正常重绘

## 技术实现

1. **恢复防抖处理**：在onScroll方法中添加防抖，时间调整为100ms
2. **增强绘制逻辑**：添加绘制重试机制
3. **优化绘制时机**：确保绘制方法在DOM完全就绪后执行
4. **减少绘制频率**：避免不必要的绘制调用

通过这些优化，解决tab切换时图形绘制不稳定的问题，同时减少内存泄漏风险，提高性能。