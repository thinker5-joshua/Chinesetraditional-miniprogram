# 相关词组显示问题修复计划

## 问题分析

根据用户反馈，列表页和测试页中相关词组不显示，而首页字卡显示正常。通过分析代码：

### 当前显示方式（可能存在问题）

* **列表页**：`{{item.relatedPhrases ? item.relatedPhrases.join('、') : '暂无'}}`

* **测试页**：`{{testQuestions[currentQuestionIndex].relatedPhrases ? testQuestions[currentQuestionIndex].relatedPhrases.join('、') : '暂无'}}`

### 首页字卡显示方式（正常工作）

```wxml
<view class="related-phrases">
  <view class="section-label">相关词组</view>
  <view class="phrases-grid">
    <view class="phrase-item" wx:for="{{todayCharacter.relatedPhrases}}" wx:key="index">
      {{item}}
    </view>
  </view>
</view>
```

### 数据结构（正确）

* 每个字符都有完整的 `relatedPhrases` 数组

* 例如：`"relatedPhrases": ["龟裂", "龟手"]`

## 修复方案

### 1. 列表页修复

**修改** **`subgames/daily-character/pages/list/list.wxml`**：

```wxml
<!-- 原代码 -->
<view class="item-body">
  <text class="phrases-label">相关词组：</text>
  <text class="phrases-text">{{item.relatedPhrases ? item.relatedPhrases.join('、') : '暂无'}}</text>
</view>

<!-- 修复后代码 -->
<view class="item-body">
  <text class="phrases-label">相关词组：</text>
  <view class="phrases-content">
    <view wx:if="{{item.relatedPhrases && item.relatedPhrases.length > 0}}" class="phrases-list">
      <text class="phrase-item" wx:for="{{item.relatedPhrases}}" wx:key="index">{{item}}{{index < item.relatedPhrases.length - 1 ? '、' : ''}}</text>
    </view>
    <text wx:else class="phrases-text">暂无</text>
  </view>
</view>
```

### 2. 测试页修复

**修改** **`subgames/daily-character/pages/test/index.wxml`**：

```wxml
<!-- 原代码 -->
<view class="related-phrases">
  <text class="phrases-label">相关词组：</text>
  <text class="phrases-text">{{testQuestions[currentQuestionIndex].relatedPhrases ? testQuestions[currentQuestionIndex].relatedPhrases.join('、') : '暂无'}}</text>
</view>

<!-- 修复后代码 -->
<view class="related-phrases">
  <text class="phrases-label">相关词组：</text>
  <view class="phrases-content">
    <view wx:if="{{testQuestions[currentQuestionIndex].relatedPhrases && testQuestions[currentQuestionIndex].relatedPhrases.length > 0}}" class="phrases-list">
      <text class="phrase-item" wx:for="{{testQuestions[currentQuestionIndex].relatedPhrases}}" wx:key="index">{{item}}{{index < testQuestions[currentQuestionIndex].relatedPhrases.length - 1 ? '、' : ''}}</text>
    </view>
    <text wx:else class="phrases-text">暂无</text>
  </view>
</view>
```

### 3. 恢复原来的配色方案

**列表页** (`subgames/daily-character/pages/list/list.wxss`)：

```wxss
.phrases-text {
  flex: 1;
  font-size: 32rpx;
  color: #666; /* 恢复原来的颜色 */
  line-height: 1.4;
}
```

**测试页** (`subgames/daily-character/pages/test/index.wxss`)：

```wxss
.phrases-text {
  font-size: 28rpx;
  color: #888; /* 恢复原来的颜色 */
}
```

##
