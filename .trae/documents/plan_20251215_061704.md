# 菜根谭摘录清理与扩充计划

## 任务目标
1. 删除匹配失败的摘录
2. 从原始文本中补充新的摘录到360条
3. 确保所有内容都出自菜根谭
4. 确保没有重复内容

## 实施步骤

1. **清理现有数据**
   - 读取 `validation_report.json` 文件，获取匹配失败的摘录列表
   - 从 `data.js` 文件中删除所有匹配失败的摘录

2. **提取原始文本内容**
   - 读取 `caigentan.txt` 文件
   - 将文本按卷次分割，提取所有可能的摘录单位
   - 将长文本分割成适合的摘录长度（10-100字符）

3. **过滤与选择**
   - 创建现有摘录的集合，避免重复
   - 过滤出未被使用的摘录
   - 按长度排序，优先选择较长的摘录
   - 选择需要的数量，确保最终达到360条

4. **补充摘录**
   - 为新摘录分配唯一ID
   - 根据卷次自动分类
   - 添加完整文本和来源信息

5. **验证与保存**
   - 确保所有新摘录都出自原始文本
   - 保存更新后的 `data.js` 文件

## 预期成果
- 更新后的 `data.js` 文件，包含360条菜根谭摘录
- 所有摘录均出自原始文本
- 没有重复内容
- 所有摘录的 source 字段均为正确的卷次分类

## 脚本说明
- 脚本名称：`clean_and_expand.js`
- 运行环境：Node.js
- 依赖：无外部依赖，仅使用内置模块
- 输出：控制台日志和更新后的 `data.js` 文件