# 数据备份与增量更新方案

## 目标
1. 备份当前数据文件，确保原有数据不被冲掉
2. 以备份文件为基础构造新的数据文件
3. 增量更新错误读音和关联词组，补充到原有数据后面
4. 去重处理：已有的条目舍弃，新的条目补充
5. 测试前5个文字，验证效果

## 实现步骤

### 步骤1：备份数据文件
- 创建 `data-optimized-backup.js` 作为当前数据的备份
- 确保备份文件包含完整的原始数据

### 步骤2：修改脚本逻辑
- **修改 `enhance_data_optimized.py`** 脚本，实现以下功能：
  1. 读取备份文件 `data-optimized-backup.js`
  2. 创建新文件 `data-optimized-new.js` 作为输出
  3. 保持其他字段（解释、错误原因分类、难度等级）的覆盖更新
  4. 实现错误读音和关联词组的增量更新逻辑

### 步骤3：增量更新逻辑
- **错误读音增量更新**：
  1. 获取模型返回的错误读音列表
  2. 遍历每个新错误读音
  3. 检查是否已存在于原有的错误读音列表中
  4. 若不存在且总数未达上限（3个），则添加到列表末尾

- **关联词组增量更新**：
  1. 获取模型返回的关联词组列表
  2. 遍历每个新关联词组
  3. 检查是否已存在于原有的关联词组列表中
  4. 若不存在且总数未达上限（4个），则添加到列表末尾

### 步骤4：测试验证
- 运行修改后的脚本，处理前5个文字
- 生成详细报告，包含：
  - 原有数据
  - 模型返回数据
  - 增量更新后的数据
  - 更新统计信息（新增条目数量）

### 步骤5：验证结果
- 检查 `data-optimized-new.js` 文件
- 验证错误读音和关联词组是否正确增量更新
- 验证其他字段是否正确更新
- 确认数据格式正确，无语法错误

## 技术要点
- 文件备份与读写操作
- 数据解析与处理
- 增量更新与去重逻辑
- 模型API调用与响应解析
- 详细报告生成

## 预期输出
- `data-optimized-backup.js` - 原始数据备份
- `data-optimized-new.js` - 增量更新后的数据
- `enhance_data_report.json` - 详细更新报告
- 控制台输出更新统计信息