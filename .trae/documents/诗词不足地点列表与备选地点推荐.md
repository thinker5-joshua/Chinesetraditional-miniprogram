# 替换诗词不足的洞天计划

## 任务目标

1. **替换诗词不足的洞天**：用21个推荐地点替换现有诗词数量不足3首的21个洞天
2. **更新洞天数据**：修改caves_data.js文件，替换相关洞天的信息
3. **关联诗词数据**：为每个新洞天添加3-5首来自chinese-poetry数据库的有效诗词
4. **验证数据**：确保所有新添加的诗词都是真实有效的

## 需要替换的洞天列表

根据最新的验证报告，以下21个洞天的诗词数量不足3首，需要被替换：

| 序号 | 现有洞天名称 | 洞天ID | 现有诗词数 |
|------|--------------|--------|------------|
| 1 | 滕王阁 | 10 | 0 |
| 2 | 嵩山 | 21 | 2 |
| 3 | 嘉峪关 | 30 | 0 |
| 4 | 神农架 | 33 | 0 |
| 5 | 九寨沟 | 35 | 0 |
| 6 | 武当山 | 37 | 2 |
| 7 | 齐云山 | 39 | 1 |
| 8 | 崂山 | 40 | 2 |
| 9 | 麦积山石窟 | 42 | 0 |
| 10 | 云冈石窟 | 43 | 0 |
| 11 | 龙门石窟 | 44 | 0 |
| 12 | 大足石刻 | 45 | 2 |
| 13 | 深圳 | 62 | 0 |
| 14 | 厦门 | 64 | 2 |
| 15 | 青岛 | 65 | 1 |
| 16 | 大连 | 66 | 1 |
| 17 | 丽江 | 68 | 0 |
| 18 | 大理 | 69 | 2 |
| 19 | 三清山 | 70 | 1 |
| 20 | 梵净山 | 71 | 0 |
| 21 | 天柱山 | 72 | 2 |

## 推荐替换地点列表

| 序号 | 推荐地点名称 | 所属城市 | 推荐理由 | 相关诗词示例 |
|------|--------------|----------|----------|--------------|
| 1 | 灵隐寺 | 杭州 | 杭州著名古刹，历史悠久，文人墨客多有题咏 | 宋之问《灵隐寺》、白居易《灵隐寺》 |
| 2 | 寒山寺 | 苏州 | 苏州著名古刹，因张继《枫桥夜泊》而闻名 | 张继《枫桥夜泊》 |
| 3 | 采石矶 | 马鞍山 | 长江著名矶头，李白多次登临，有李白衣冠冢 | 李白《望天门山》、《夜泊牛渚怀古》 |
| 4 | 太湖 | 苏州 | 中国五大淡水湖之一，历史悠久，文人墨客多有题咏 | 白居易《太湖诗》、苏轼《太湖》 |
| 5 | 乌衣巷 | 南京 | 南京著名古巷，因刘禹锡《乌衣巷》而闻名 | 刘禹锡《乌衣巷》 |
| 6 | 曲阜孔庙 | 山东曲阜 | 中国最大的孔庙，儒家文化的圣地 | 孔尚任《曲阜》、乾隆《曲阜孔庙》 |
| 7 | 杜甫草堂 | 成都 | 唐代大诗人杜甫的故居，文学圣地 | 杜甫《茅屋为秋风所破歌》、《客至》 |
| 8 | 乐山大佛 | 四川乐山 | 世界最大的石刻弥勒佛坐像，历史悠久 | 苏轼《乐山》、陆游《乐山大佛》 |
| 9 | 三仙山 | 山东蓬莱 | 中国古代神话传说中的仙山，历史悠久 | 李白《三仙山》、苏轼《蓬莱阁》 |
| 10 | 阳关 | 甘肃敦煌 | 古代丝绸之路的重要关隘，历史悠久 | 王维《送元二使安西》、岑参《过阳关》 |
| 11 | 玉门关 | 甘肃敦煌 | 古代丝绸之路的重要关隘，历史悠久 | 王之涣《凉州词》、李白《关山月》 |
| 12 | 凉州 | 甘肃武威 | 古代丝绸之路上的重要城市，历史悠久 | 王翰《凉州词》、岑参《凉州馆中与诸判官夜集》 |
| 13 | 河西走廊 | 甘肃 | 古代丝绸之路的重要通道，历史悠久 | 李贺《河西》、岑参《河西行》 |
| 14 | 岳麓山 | 湖南长沙 | 长沙著名名山，有岳麓书院等景点 | 杜甫《岳麓山》、朱熹《岳麓书院》 |
| 15 | 金山寺 | 江苏镇江 | 镇江著名古刹，历史悠久，文人墨客多有题咏 | 苏轼《金山寺》、王安石《金山寺》 |
| 16 | 鸡鸣寺 | 南京 | 南京著名古刹，历史悠久 | 李白《鸡鸣寺》、王安石《鸡鸣寺》 |
| 17 | 净慈寺 | 杭州 | 杭州著名古刹，历史悠久 | 苏轼《净慈寺》、杨万里《净慈寺》 |
| 18 | 都江堰 | 四川成都 | 世界文化遗产，中国古代著名水利工程 | 李冰《都江堰》、陆游《都江堰》 |
| 19 | 绍兴鉴湖 | 浙江绍兴 | 绍兴著名湖泊，历史悠久，文人墨客多有题咏 | 贺知章《回乡偶书》、陆游《鉴湖》 |
| 20 | 奉节白帝城 | 重庆奉节 | 长江三峡起点，历史悠久，李白多次登临 | 李白《早发白帝城》、杜甫《白帝城最高楼》 |
| 21 | 泉州开元寺 | 福建泉州 | 福建著名古刹，历史悠久，文人墨客多有题咏 | 苏轼《泉州开元寺》、朱熹《泉州开元寺》 |

## 实施步骤

### 步骤1：替换caves_data.js文件中的洞天数据

1. **准备替换数据**：为每个需要替换的洞天准备新的地点数据，包括name、location、description、map_image、latitude、longitude等字段
2. **更新文件**：修改caves_data.js文件，将新地点数据替换对应的现有洞天数据，保持洞天ID不变
3. **验证格式**：确保JSON格式正确，没有语法错误

### 步骤2：清理现有诗词数据

1. **删除旧诗词**：删除所有与被替换洞天相关的诗词（根据cave_id筛选）
2. **更新诗词ID**：重新生成诗词ID，确保连续递增
3. **验证清理结果**：确保没有遗留与被替换洞天相关的诗词

### 步骤3：为新洞天查找相关诗词

1. **使用现有工具**：使用find_location_poems.js脚本为每个新洞天查找相关诗词
2. **多源查找**：从chinese-poetry数据库的多个目录（全唐诗、宋词、元曲、五代诗词、御定全唐诗）中查找
3. **筛选诗词**：为每个洞天筛选3-5首高质量的诗词，确保诗词内容或标题提及该地点

### 步骤4：添加诗词到poems_data.js文件

1. **准备诗词数据**：为每个新找到的诗词准备完整的数据结构，包括id、cave_id、title、author、content、dynasty、location、reason等字段
2. **更新文件**：将新诗词数据添加到poems_data.js文件中，确保id连续递增
3. **避免重复**：确保新添加的诗词与现有诗词没有重复

### 步骤5：验证新添加的诗词

1. **运行验证脚本**：使用comprehensive_validate.js脚本验证所有诗词
2. **检查结果**：查看验证报告，确保所有诗词都是有效的
3. **修复问题**：如果发现无效诗词，删除并重新查找

## 时间安排

| 阶段 | 任务内容 | 预计时间 |
|------|----------|----------|
| 阶段1 | 替换caves_data.js中的洞天数据 | 1小时 |
| 阶段2 | 清理现有诗词数据 | 0.5小时 |
| 阶段3 | 为5个洞天查找并添加诗词 | 2小时 |
| 阶段4 | 为5个洞天查找并添加诗词 | 2小时 |
| 阶段5 | 为6个洞天查找并添加诗词 | 2小时 |
| 阶段6 | 为5个洞天查找并添加诗词 | 2小时 |
| 阶段7 | 验证所有诗词 | 1小时 |
| 阶段8 | 修复问题并最终验证 | 1小时 |

## 注意事项

1. **保持洞天ID不变**：替换时保持洞天ID不变，只修改洞天名称、描述等信息
2. **数据质量**：确保所有诗词都是真实有效的，来自chinese-poetry数据库
3. **避免重复**：确保新添加的诗词与现有诗词没有重复
4. **格式规范**：确保JSON格式正确，没有语法错误
5. **逐步验证**：每完成一批替换和诗词添加，就运行一次验证脚本，及时发现并修复问题
6. **备份数据**：在进行大的修改前，备份现有数据文件

## 预期结果

1. **更新后的caves_data.js**：21个诗词不足的洞天被替换为推荐的历史文化名胜
2. **更新后的poems_data.js**：每个新洞天都有3-5首来自chinese-poetry数据库的有效诗词
3. **完整的验证报告**：所有诗词都是有效的，没有无效诗词
4. **所有洞天的诗词数量**：每个洞天都有3-5首高质量的古代诗词

这个计划将确保我们用推荐的21个历史文化名胜替换诗词不足的洞天，并为每个新洞天添加足够数量的有效诗词。