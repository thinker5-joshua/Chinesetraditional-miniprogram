# 修复data-diff.js重复数据方案

## 一、方案概述
按照用户要求，先备份原文件，然后去除本地重复数据，最后去除与云数据库重复数据，确保数据唯一性。

## 二、执行步骤

### 1. 备份原文件
- 复制 `data-diff.js` 到 `data-diff-backup.js`
- 使用 `cp` 命令执行备份

### 2. 去除本地重复数据
- **重复判断标准**：字和正确读音都相同
- **保留规则**：保留第一次出现的条目，删除后续重复条目
- **需要处理的重复数据**：
  - 柘（zhè）：保留ID 4，删除ID 12、20、42
  - 鄄（juàn）：保留ID 14，删除ID 38
  - 訾（zī）：保留ID 5，删除ID 41
  - 馗（kuí）：保留ID 6，删除ID 43
  - 森（sēn）：保留ID 67，删除ID 75

### 3. 去除与云数据库重复数据
- **重复判断标准**：字和正确读音都相同
- **处理规则**：删除所有与云数据库重复的本地数据
- **需要删除的数据**：
  - 淖（nào）：ID 9
  - 阿（ē）：ID 21
  - 囫（hú）：ID 92
  - 囵（lún）：ID 93
  - 娠（shēn）：ID 99
  - 诣（yì）：ID 101
  - 剽（piāo）：ID 102
  - 霾（mái）：ID 103
  - 梏（gù）：ID 105
  - 恫（dòng）：ID 106
  - 隽（juàn）：ID 109

### 4. 验证修复结果
- 运行 `node check_duplicates_simple.js` 检查重复数据
- 确保本地重复和云数据库重复都为0
- 使用 `node -c data-diff.js` 验证语法正确性

## 三、执行命令

### 1. 备份文件
```bash
cp data-diff.js data-diff-backup.js
```

### 2. 修复本地重复数据
使用 `Edit` 工具删除重复条目

### 3. 修复云数据库重复数据
使用 `Edit` 工具删除与云数据库重复的条目

### 4. 验证修复结果
```bash
node check_duplicates_simple.js
node -c data-diff.js
```

## 四、预期结果
- 原文件备份完成
- 本地重复数据：0条
- 与云数据库重复数据：0条
- 文件语法正确
- 数据总量：109 - 7（本地重复） - 11（云数据库重复） = 91条

## 五、风险控制
- 操作前必须备份原文件
- 每步操作后验证结果
- 如出现问题，可恢复备份文件

## 六、时间估计
- 备份文件：1分钟
- 修复本地重复：5分钟
- 修复云数据库重复：5分钟
- 验证结果：2分钟
- 总计：13分钟