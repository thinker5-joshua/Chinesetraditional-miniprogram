# 七十二洞天诗词显示优化计划

## 问题分析

当前七十二洞天中，洞天详情和诗词挑战中的诗词显示风格不一致，需要统一优化。主要问题包括：
1. 洞天详情和诗词挑战中的诗词排版风格不同
2. 诗词内容的分行处理方式不统一
3. 诗词挑战中缺少清晰的洞天名称显示

## 优化目标

1. 统一洞天详情和诗词挑战中的诗词显示风格
2. 按照数据中的分行符进行分行，不主动按标点或格律分行
3. 调整字体、边框边距等，确保七言诗两句可以在一行内显示
4. 控制行距，保持传统诗词显示的典雅大方
5. 在诗词挑战中上方显示大字洞天名称

## 实现步骤

### 1. 修改诗词挑战界面WXML

- 添加洞天名称显示区域
- 修改诗词内容显示方式，支持按分行符显示

### 2. 优化诗词显示CSS样式

- 统一洞天详情和诗词挑战中的诗词样式
- 调整字体大小、行高、字间距等
- 优化边框边距，确保七言诗两行可以在一行内显示

### 3. 调整JS逻辑

- 确保诗词内容按分行符正确分行
- 在诗词挑战中添加洞天名称的显示逻辑

### 4. 优化洞天详情中的诗词显示

- 调整边框边距等样式，与诗词挑战保持一致

## 具体实现

### 1. 修改诗词挑战WXML

```wxml
<!-- 诗词挑战界面 -->
<view id="poetry-challenge-view" class="game-view {{currentView === 'poetry-challenge' ? 'active' : ''}}">
<view class="challenge-container">
  <!-- 洞天名称大字显示 -->
  <view class="cave-name-big">
    <text>{{currentCave.name}}</text>
  </view>
  
  <!-- 洞天提示 -->
<view class="cave-prompt">
  <text>{{cavePromptText}}</text>
</view>

<view class="poem-content-container">
<view id="poem-question" class="poem-display">
  <text class="poem-title">{{currentPoem.title}}</text>
  <view class="poet-info">
    <text>{{currentPoem.author}}</text>
  </view>
  <view class="poem-content-traditional">
    <block wx:for="{{currentPoemLines}}" wx:key="index">
      <text class="poem-line">{{item}}</text>
    </block>
  </view>
</view>
<!-- 其他内容保持不变 -->
</view>
</view>
</view>
```

### 2. 优化CSS样式

```css
/* 统一诗词显示样式 */
.poem-content-traditional {
  text-align: center;
  margin: 30rpx 0;
  padding: 30rpx;
  border-radius: 20rpx;
  background: rgba(255, 255, 255, 0.05);
  backdrop-filter: blur(10rpx);
}

.poem-line {
  font-size: 36rpx;
  line-height: 2;
  color: #e6e6e6;
  text-align: center;
  margin: 8rpx 0;
  font-family: 'KaiTi', '楷体', serif;
  letter-spacing: 4rpx;
  display: block;
}

/* 洞天名称大字显示 */
.cave-name-big {
  text-align: center;
  margin-bottom: 30rpx;
}

.cave-name-big text {
  font-size: 60rpx;
  font-weight: bold;
  color: #64ffda;
  text-shadow: 0 0 20rpx rgba(100, 255, 218, 0.5);
  display: block;
}
```

### 3. 调整JS逻辑

```javascript
// 在诗词挑战界面初始化时添加诗词分行处理
onLoad() {
  // 现有代码...
  this.splitPoemContent();
},

// 诗词内容按分行符拆分
onShow() {
  // 现有代码...
  this.splitPoemContent();
},

// 拆分诗词内容为行数组
splitPoemContent() {
  if (this.data.currentPoem && this.data.currentPoem.content) {
    const poemLines = this.data.currentPoem.content.split('\n').filter(line => line.trim() !== '');
    this.setData({
      currentPoemLines: poemLines
    });
  }
}
```

### 4. 优化洞天详情中的诗词显示

确保洞天详情中的诗词显示样式与诗词挑战保持一致，调整边框边距等。

## 预期效果

1. 洞天详情和诗词挑战中的诗词显示风格统一
2. 诗词内容按数据中的分行符正确分行显示
3. 七言诗两句可以在一行内完整显示
4. 行距控制合理，传统诗词显示典雅大方
5. 诗词挑战中上方清晰显示洞天名称