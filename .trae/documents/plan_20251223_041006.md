# å…­åå››å¦å­¦ä¹ ä¼˜åŒ–æ–¹æ¡ˆï¼ˆæœ€ç»ˆç‰ˆï¼‰

## ä¸€ã€æ ¸å¿ƒé—®é¢˜åˆ†æ

1. **æ¨¡å¼é€‰æ‹©æŒ‰é’®å¸ƒå±€é—®é¢˜**ï¼šéšæœºç¿»å’Œå…­çˆ»å˜æŒ‰é’®éœ€è¦åœ¨ä¸€è¡Œæ˜¾ç¤ºï¼Œå°å±é€‚é…
2. **é¦–æ¬¡è¿›å…¥å¦å¡ç‰‡æ˜¾ç¤ºæœ‰è¯¯**ï¼šé¦–é¡µè°ƒç”¨äº†ä¸å¿…è¦çš„åˆ†ç»„åˆå§‹åŒ–æ–¹æ³•
3. **é¡¶éƒ¨æŒ‰é’®é¢œè‰²ä¸ç»Ÿä¸€**ï¼šå­˜å¡ç‰‡ã€åˆ†ç»„çœ‹ã€å»è¯†å¦ä¸‰ä¸ªæŒ‰é’®é¢œè‰²ä¸åŒ

## äºŒã€è¯¦ç»†å®ç°æ–¹æ¡ˆ

### 1. æ¨¡å¼é€‰æ‹©æŒ‰é’®ä¼˜åŒ–

* **ä¿®æ”¹ä½ç½®**ï¼š`subgames/64Hexagrams/index.wxml` ç¬¬17-32è¡Œ

* **å®ç°å†…å®¹**ï¼š

  * ç§»é™¤æ¨¡å¼é€‰æ‹©ä¸­çš„"åˆ†ç»„çœ‹"æŒ‰é’®

  * ç¡®ä¿"éšæœºç¿»"å’Œ"å…­çˆ»å˜"æŒ‰é’®åœ¨åŒä¸€è¡Œæ˜¾ç¤º

  * è°ƒæ•´æŒ‰é’®æ ·å¼ï¼Œç¡®ä¿å°å±é€‚é…

  * ä¿®æ”¹ `.mode-buttons` æ ·å¼ï¼Œç§»é™¤ `flex-wrap: wrap`

  * å‡å°æŒ‰é’®å†…è¾¹è·å’Œå­—ä½“å¤§å°ï¼Œç¡®ä¿å°å±ä¸€è¡Œæ˜¾ç¤º

### 2. é¦–æ¬¡è¿›å…¥å¦å¡ç‰‡æ˜¾ç¤ºé—®é¢˜

* **ä¿®æ”¹ä½ç½®**ï¼š`subgames/64Hexagrams/index.js` ç¬¬40è¡Œ

* **å®ç°å†…å®¹**ï¼š

  * ç§»é™¤ `onLoad` æ–¹æ³•ä¸­ `this.initializeGroups()` çš„è°ƒç”¨

  * ç§»é™¤é¦–é¡µä¸­æ‰€æœ‰ä¸åˆ†ç»„ç›¸å…³çš„æ•°æ®åˆå§‹åŒ–ä»£ç 

  * ç¡®ä¿åªåˆå§‹åŒ–éšæœºç¿»é˜…å’Œå…­çˆ»å˜æ‰€éœ€çš„æ•°æ®

### 3. é¡¶éƒ¨æŒ‰é’®é¢œè‰²ç»Ÿä¸€

* **ä¿®æ”¹ä½ç½®**ï¼š`subgames/64Hexagrams/index.wxml` ç¬¬11-14è¡Œ

* **å®ç°å†…å®¹**ï¼š

  * å°†æ‰€æœ‰ä¸‰ä¸ªæŒ‰é’®çš„ç±»åç»Ÿä¸€ä¸ºç›¸åŒçš„æ ·å¼ç±»

  * ä¿®æ”¹æŒ‰é’®æ ·å¼ï¼Œä½¿ç”¨æ·¡ä¸€ç‚¹çš„èƒŒæ™¯è‰²

  * ç¡®ä¿ä¸‰ä¸ªæŒ‰é’®é¢œè‰²ä¸€è‡´ï¼Œæ ·å¼ç»Ÿä¸€

## ä¸‰ã€å…·ä½“ä»£ç ä¿®æ”¹

### 1. é¦–é¡µWXMLä¿®æ”¹

```html
<!-- ä¿®æ”¹å‰ -->
<view class="top-buttons">
  <button class="primary-button" bindtap="saveHexagramCard">å­˜å¡ç‰‡</button>
  <button class="secondary-button" bindtap="goToGroupView">åˆ†ç»„çœ‹</button>
  <button class="secondary-button" bindtap="goToMatchingGame">å»è¯†å¦</button>
</view>

<!-- æŸ¥çœ‹æ¨¡å¼é€‰æ‹© -->
<view class="mode-selector">
  <view class="mode-buttons">
    <button 
      class="mode-button {{viewMode === 'random' ? 'active' : ''}}" 
      bindtap="switchToRandom"
    >éšæœºç¿»</button>
    <button 
      class="mode-button {{viewMode === 'sixYaoChange' ? 'active' : ''}}" 
      bindtap="switchToSixYaoChange"
    >å…­çˆ»å˜</button>
    <button 
      class="mode-button {{viewMode === 'group' ? 'active' : ''}}" 
      bindtap="switchToGroup"
    >åˆ†ç»„çœ‹</button>
  </view>
  
  <!-- åˆ†ç»„æ–¹å¼é€‰æ‹©ï¼ˆä»…åœ¨åˆ†ç»„æŸ¥çœ‹æ¨¡å¼ä¸‹æ˜¾ç¤ºï¼‰ -->
  <view class="mode-buttons" wx:if="{{viewMode === 'group'}}">
    <button 
      class="mode-button {{groupMode === 'sequence' ? 'active' : ''}}" 
      bindtap="switchToSequence"
    >é¡ºåº</button>
    <button 
      class="mode-button {{groupMode === 'palace' ? 'active' : ''}}" 
      bindtap="switchToPalace"
    >å…«å®«</button>
  </view>
</view>

<!-- ä¿®æ”¹å -->
<view class="top-buttons">
  <button class="top-button" bindtap="saveHexagramCard">
    <text class="button-icon">ğŸ“·</text>
    <text>å­˜å¡ç‰‡</text>
  </button>
  <button class="top-button" bindtap="goToGroupView">
    <text class="button-icon">ğŸ“š</text>
    <text>åˆ†ç»„çœ‹</text>
  </button>
  <button class="top-button" bindtap="goToMatchingGame">
    <text class="button-icon">ğŸ®</text>
    <text>å»è¯†å¦</text>
  </button>
</view>

<!-- æŸ¥çœ‹æ¨¡å¼é€‰æ‹© -->
<view class="mode-selector">
  <view class="mode-buttons">
    <button 
      class="mode-button {{viewMode === 'random' ? 'active' : ''}}" 
      bindtap="switchToRandom"
    >éšæœºç¿»</button>
    <button 
      class="mode-button {{viewMode === 'sixYaoChange' ? 'active' : ''}}" 
      bindtap="switchToSixYaoChange"
    >å…­çˆ»å˜</button>
  </view>
</view>
```

### 2. é¦–é¡µJSä¿®æ”¹

```javascript
// ä¿®æ”¹å‰
onLoad() {
  this.initializeGroups();
  this.initializeRandomHexagrams();
  
  // åˆå§‹åŒ–éšæœºç¿»é˜…çš„ç¬¬ä¸€ä¸ªå¦è±¡
  const firstRandomHexagramIndex = this.data.randomHexagramOrder[this.data.currentRandomIndex];
  const firstRandomHexagram = hexagramsData[firstRandomHexagramIndex];
  
  // åˆå§‹åŒ–å…­çˆ»å˜çš„ç¬¬ä¸€ä¸ªå¦è±¡
  const firstSixYaoHexagramIndex = this.data.randomHexagramOrder[this.data.currentSixYaoIndex];
  const firstSixYaoHexagram = hexagramsData[firstSixYaoHexagramIndex];
  const yaoStates = this.extractYaoStatesFromSymbol(firstSixYaoHexagram.symbol);
  
  this.setData({
    currentRandomHexagram: firstRandomHexagram,
    currentSixYaoHexagram: firstSixYaoHexagram,
    sixYaoStates: yaoStates,
    sixYaoButtons: this.generateSixYaoButtons(yaoStates)
  });
  
  // å¦‚æœåˆå§‹æ¨¡å¼æ˜¯åˆ†ç»„æŸ¥çœ‹ï¼Œæ›´æ–°å½“å‰åˆ†ç»„
  if (this.data.viewMode === 'group') {
    this.updateCurrentGroup();
  }
}

// ä¿®æ”¹å
onLoad() {
  this.initializeRandomHexagrams();
  
  // åˆå§‹åŒ–éšæœºç¿»é˜…çš„ç¬¬ä¸€ä¸ªå¦è±¡
  const firstRandomHexagramIndex = this.data.randomHexagramOrder[this.data.currentRandomIndex];
  const firstRandomHexagram = hexagramsData[firstRandomHexagramIndex];
  
  // åˆå§‹åŒ–å…­çˆ»å˜çš„ç¬¬ä¸€ä¸ªå¦è±¡
  const firstSixYaoHexagramIndex = this.data.randomHexagramOrder[this.data.currentSixYaoIndex];
  const firstSixYaoHexagram = hexagramsData[firstSixYaoHexagramIndex];
  const yaoStates = this.extractYaoStatesFromSymbol(firstSixYaoHexagram.symbol);
  
  this.setData({
    currentRandomHexagram: firstRandomHexagram,
    currentSixYaoHexagram: firstSixYaoHexagram,
    sixYaoStates: yaoStates,
    sixYaoButtons: this.generateSixYaoButtons(yaoStates)
  });
}
```

### 3. é¦–é¡µWXSSä¿®æ”¹

```css
/* ä¿®æ”¹å‰ */
.top-buttons {
  display: flex;
  justify-content: center;
  gap: 15px;
  margin-bottom: 15px;
  padding: 8px;
  background-color: rgba(255, 255, 255, 0.8);
  border-radius: 12px;
  box-shadow: 0 4px 12px rgba(139, 69, 19, 0.1);
}

.primary-button {
  background-color: #8b4513;
  color: #fff;
  border: 2px solid #b8a57e;
  padding: 8px 20px;
  font-size: 18px;
  border-radius: 8px;
  cursor: pointer;
  transition: all 0.3s ease;
  font-family: "SimSun", "STSong", serif;
  box-shadow: 0 4px 10px rgba(139, 69, 19, 0.3);
  font-weight: bold;
  letter-spacing: 1px;
  width: auto;
  min-width: 120px;
}

.secondary-button {
  background-color: #d4af37;
  color: #8b4513;
  border: 2px solid #b8a57e;
  padding: 8px 20px;
  font-size: 18px;
  border-radius: 8px;
  cursor: pointer;
  transition: all 0.3s ease;
  font-family: "SimSun", "STSong", serif;
  box-shadow: 0 4px 10px rgba(212, 175, 55, 0.3);
  font-weight: bold;
  letter-spacing: 1px;
  width: auto;
  min-width: 120px;
}

.mode-buttons {
  display: flex;
  gap: 10px;
  justify-content: center;
  flex-wrap: wrap;
}

/* ä¿®æ”¹å */
.top-buttons {
  display: flex;
  justify-content: center;
  gap: 10px;
  margin-bottom: 15px;
  padding: 8px;
  background-color: rgba(255, 255, 255, 0.8);
  border-radius: 12px;
  box-shadow: 0 4px 12px rgba(139, 69, 19, 0.1);
}

.top-button {
  background-color: #f5f1e9;
  color: #8b4513;
  border: 2px solid #b8a57e;
  padding: 6px 15px;
  font-size: 16px;
  border-radius: 8px;
  cursor: pointer;
  transition: all 0.3s ease;
  font-family: "SimSun", "STSong", serif;
  box-shadow: 0 2px 6px rgba(139, 69, 19, 0.2);
  font-weight: bold;
  letter-spacing: 1px;
  width: auto;
  min-width: 100px;
  display: flex;
  align-items: center;
  justify-content: center;
  gap: 5px;
}

.mode-buttons {
  display: flex;
  gap: 10px;
  justify-content: center;
}

.button-icon {
  font-size: 18px;
}
```

## ä¸‰ã€é¢„æœŸæ•ˆæœ

1. **æ¨¡å¼é€‰æ‹©æŒ‰é’®ä¼˜åŒ–**ï¼šéšæœºç¿»å’Œå…­çˆ»å˜æŒ‰é’®åœ¨ä¸€è¡Œæ˜¾ç¤ºï¼Œå°å±é€‚é…è‰¯å¥½
2. **é¦–æ¬¡è¿›å…¥å¦å¡ç‰‡æ˜¾ç¤ºæ­£å¸¸**ï¼šç§»é™¤äº†ä¸å¿…è¦çš„åˆ†ç»„åˆå§‹åŒ–ä»£ç ï¼Œå¡ç‰‡æ˜¾ç¤ºæ­£å¸¸
3. **é¡¶éƒ¨æŒ‰é’®é¢œè‰²ç»Ÿä¸€**ï¼šä¸‰ä¸ªæŒ‰é’®ä½¿ç”¨ç›¸åŒçš„æ·¡è‰²èƒŒæ™¯ï¼Œæ ·å¼ç»Ÿä¸€ç¾è§‚
4. **å°å±é€‚é…è‰¯å¥½**ï¼šæ‰€æœ‰æŒ‰é’®åœ¨å°å±è®¾å¤‡ä¸Šå‡èƒ½åœ¨ä¸€è¡Œæ˜¾ç¤º
5. **å›¾æ ‡å¢å¼º**ï¼šæŒ‰é’®æ·»åŠ äº†å›¾æ ‡ï¼Œæå‡äº†è§†è§‰æ•ˆæœå’Œç”¨æˆ·ä½“éªŒ

## å››ã€æµ‹è¯•è¦ç‚¹

1. é¦–æ¬¡è¿›å…¥é¦–é¡µï¼Œå¦å¡ç‰‡æ˜¾ç¤ºæ­£å¸¸
2. éšæœºç¿»å’Œå…­çˆ»å˜æŒ‰é’®åœ¨ä¸€è¡Œæ˜¾ç¤º
3. å°å±è®¾å¤‡ä¸ŠæŒ‰é’®é€‚é…è‰¯å¥½
4. é¡¶éƒ¨ä¸‰ä¸ªæŒ‰é’®é¢œè‰²ç»Ÿä¸€
5. ç¿»é¡µåå¦å¡ç‰‡æ˜¾ç¤ºæ­£å¸¸
6. å„ä¸ªåŠŸèƒ½æŒ‰é’®ç‚¹å‡»æ­£å¸¸
7. åˆ†ç»„çœ‹ã€å»è¯†å¦åŠŸèƒ½æ­£å¸¸è·³è½¬

## äº”ã€æŠ€æœ¯è¦ç‚¹

1. **ç§»é™¤ä¸å¿…è¦çš„ä»£ç **ï¼šç§»é™¤é¦–é¡µä¸­ä¸åˆ†ç»„ç›¸å…³çš„åˆå§‹åŒ–ä»£ç 
2. **Flexå¸ƒå±€ä¼˜åŒ–**ï¼šä½¿ç”¨flexå¸ƒå±€å®ç°æŒ‰é’®çš„ä¸€è¡Œæ˜¾ç¤º
3. **æ ·å¼ç»Ÿä¸€**ï¼šå°†æ‰€æœ‰æŒ‰é’®ç»Ÿä¸€ä¸ºç›¸åŒçš„é¢œè‰²å’Œæ ·å¼
4. **å°å±é€‚é…**ï¼šå‡å°æŒ‰é’®å†…è¾¹è·å’Œå­—ä½“å¤§å°ï¼Œç¡®ä¿å°å±é€‚é…
5. **å›¾æ ‡å¢å¼º**ï¼šä¸ºæŒ‰é’®æ·»åŠ å›¾æ ‡ï¼Œæå‡è§†è§‰æ•ˆæœ

