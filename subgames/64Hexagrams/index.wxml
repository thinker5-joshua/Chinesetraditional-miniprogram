<view class="container">
  <!-- Canvasç»„ä»¶ï¼Œç”¨äºç”Ÿæˆå¡ç‰‡ -->
  <canvas type="2d" id="hexagram-canvas" style="width: 0px; height: 0px; position: absolute; left: -9999px;"></canvas>
  
  <view class="header">
    <text class="title">æ˜“ç»å…­åå››å¦å­¦ä¹ </text>
    <text class="subtitle">æ¢ç´¢ä¸­å›½ä¼ ç»Ÿå“²å­¦æ™ºæ…§</text>
  </view>

  <!-- é¡¶éƒ¨æŒ‰é’®åŒºåŸŸ -->
  <view class="top-buttons">
    <button class="top-button" bindtap="saveHexagramCard">
      <text class="button-icon">ğŸ“„</text>
      <text> å­˜å¡ç‰‡</text>
    </button>
    <button class="top-button" bindtap="goToGroupView">
      <text class="button-icon">ğŸ“‹</text>
      <text> åˆ†ç»„çœ‹</text>
    </button>
    <button class="top-button" bindtap="goToMatchingGame">
      <text class="button-icon">ğŸ”</text>
      <text> å»è¯†å¦</text>
    </button>
  </view>

  <!-- æŸ¥çœ‹æ¨¡å¼é€‰æ‹© -->
  <view class="mode-selector">
    <view class="mode-buttons">
      <button 
        class="mode-button {{viewMode === 'random' ? 'active' : ''}}" 
        bindtap="switchToRandom"
      >éšæœºç¿»</button>
      <button 
        class="mode-button {{viewMode === 'sixYaoChange' ? 'active' : ''}}" 
        bindtap="switchToSixYaoChange"
      >å…­çˆ»å˜</button>
    </view>
  </view>



  <!-- éšæœºç¿»é˜…æ¨¡å¼å†…å®¹ -->
  <view wx:if="{{viewMode === 'random'}}" class="random-view">
    <!-- éšæœºå¦è±¡å¡ç‰‡ -->
      <view 
        class="random-card" 
        bindtap="goToHexagramDetail" 
        data-hexagram="{{currentRandomHexagram}}"
        bindtouchstart="onTouchStart"
        bindtouchmove="onTouchMove"
        bindtouchend="onTouchEnd"
      >
      <!-- å¦è±¡åºå· -->
      <view class="hexagram-sequence">ç¬¬{{currentRandomHexagram.id}}å¦</view>
      
      <!-- å¦è±¡ -->
      <view class="hexagram-symbol-large">{{currentRandomHexagram.symbol}}</view>
      
      <!-- å¦åå’Œæ‹¼éŸ³ -->
      <view class="hexagram-name-row">
        <view class="hexagram-name-large">{{currentRandomHexagram.name}}</view>
        <view class="hexagram-pinyin-large">{{currentRandomHexagram.pinyin}}</view>
      </view>
      
      <!-- åˆ«åå’Œä¸Šä¸‹å¦ -->
      <view class="hexagram-extra-info">
        <view class="hexagram-alias">{{currentRandomHexagram.alias}}</view>
        <view class="hexagram-trigrams">ä¸Š{{currentRandomHexagram.upperTrigram}}ä¸‹{{currentRandomHexagram.lowerTrigram}}</view>
      </view>
      
      <!-- å¦è¾ -->
      <view class="hexagram-text-section">
        <text class="section-title">å¦è¾</text>
        <text class="hexagram-text">{{currentRandomHexagram.hexagramText}}</text>
      </view>
    </view>
    
    <!-- éšæœºç¿»é˜…ç¿»é¡µæ§åˆ¶ -->
    <view class="random-pagination">
      <button class="random-page-button" bindtap="previousRandomHexagram">
        <text class="page-arrow">â†</text>
        <text>ä¸Šä¸€ä¸ª</text>
      </button>
      <button class="random-page-button" bindtap="nextRandomHexagram">
        <text>ä¸‹ä¸€ä¸ª</text>
        <text class="page-arrow">â†’</text>
      </button>
    </view>
    
    <!-- æç¤ºæ–‡å­— -->
    <view class="hint-text">ç‚¹å‡»å¡ç‰‡æŸ¥çœ‹å¦è¯¦æƒ…</view>
  </view>
  
  <!-- å…­çˆ»å˜æ¨¡å¼å†…å®¹ -->
  <view wx:if="{{viewMode === 'sixYaoChange'}}" class="six-yao-view">
    <!-- éšæœºå¦è±¡å¡ç‰‡ -->
    <view 
      class="random-card" 
      bindtap="goToHexagramDetail" 
      data-hexagram="{{currentSixYaoHexagram}}"
      bindtouchstart="onTouchStart"
      bindtouchmove="onTouchMove"
      bindtouchend="onTouchEnd"
    >
      <!-- å¦è±¡åºå· -->
      <view class="hexagram-sequence">ç¬¬{{currentSixYaoHexagram.id}}å¦</view>
      
      <!-- å¦è±¡ -->
      <view class="hexagram-symbol-large">{{currentSixYaoHexagram.symbol}}</view>
      
      <!-- å¦åå’Œæ‹¼éŸ³ -->
      <view class="hexagram-name-row">
        <view class="hexagram-name-large">{{currentSixYaoHexagram.name}}</view>
        <view class="hexagram-pinyin-large">{{currentSixYaoHexagram.pinyin}}</view>
      </view>
      
      <!-- åˆ«åå’Œä¸Šä¸‹å¦ -->
      <view class="hexagram-extra-info">
        <view class="hexagram-alias">{{currentSixYaoHexagram.alias}}</view>
        <view class="hexagram-trigrams">ä¸Š{{currentSixYaoHexagram.upperTrigram}}ä¸‹{{currentSixYaoHexagram.lowerTrigram}}</view>
      </view>
      
      <!-- å¦è¾ -->
      <view class="hexagram-text-section">
        <text class="section-title">å¦è¾</text>
        <text class="hexagram-text">{{currentSixYaoHexagram.hexagramText}}</text>
      </view>
    </view>
    
    <!-- å…­çˆ»æŒ‰é’® -->
    <view class="six-yao-buttons">
      <view 
        class="yao-button {{sixYaoStates[item.index] ? 'yang' : 'yin'}}" 
        wx:for="{{sixYaoButtons}}" 
        wx:key="index"
        data-index="{{item.index}}"
        bindtap="onYaoButtonTap"
      >
        <text class="yao-text">{{item.text}}</text>
        <text class="yao-symbol">{{item.symbol}}</text>
      </view>
    </view>
    
    <!-- éšæœºç¿»é˜…ç¿»é¡µæ§åˆ¶ -->
    <view class="random-pagination" wx:if="{{viewMode !== 'sixYaoChange'}}">
      <button class="random-page-button" bindtap="previousSixYaoHexagram">
        <text class="page-arrow">â†</text>
        <text>ä¸Šä¸€ä¸ª</text>
      </button>
      <button class="random-page-button" bindtap="nextSixYaoHexagram">
        <text>ä¸‹ä¸€ä¸ª</text>
        <text class="page-arrow">â†’</text>
      </button>
    </view>
    
    <!-- æç¤ºæ–‡å­— -->
    <view class="hint-text">ç‚¹å‡»å¡ç‰‡æŸ¥çœ‹å¦è¯¦æƒ…</view>
  </view>

</view>